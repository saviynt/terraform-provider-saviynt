---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "saviynt_rest_connection_resource Resource - saviynt"
subcategory: ""
description: |-
  Create and manage REST connector in Saviynt
---

# saviynt_rest_connection_resource (Resource)

Create and manage REST connector in Saviynt

## Example Usage

```terraform
resource "saviynt_rest_connection_resource" "example" {
  connection_type = "REST"
  connection_name = "Terraform_Rest_Connector"
  connection_json = jsonencode({
    authentications = {
      acctAuth = {
        authType        = "Basic",
        url             = "@HOSTNAME@",
        httpMethod      = "POST",
        httpParams      = {},
        httpHeaders     = {},
        httpContentType = "text/html",
        properties = {
          userName = "@USERNAME@",
          password = "@PASSWORD@"
        },
        expiryError = "ExpiredAuthenticationToken",
        authError = [
          "InvalidAuthenticationToken",
          "AuthenticationFailed"
        ],
        timeOutError       = "Read timed out",
        errorPath          = "error.code",
        maxRefreshTryCount = 5,
        tokenResponsePath  = "access_token",
        tokenType          = "Basic",
        accessToken        = "Basic bmlzaGFyLmJhYnVAc2"
      }
    }
  })
  import_user_json = jsonencode({
    connection = "acctAuth",
    successResponses = {
      statusCode = [
        200,
        201,
        202,
        203,
        204,
        205
      ]
    },
    url        = "https://abc.zendesk.com/api//users.json",
    httpMethod = "GET",
    httpHeaders = {
      Authorization = "$${access_token}"
    },
    userResponsePath = "users",
    colsToPropsMap = {
      username       = "id~#~char",
      systemUserName = "id~#~char",
      displayname    = "name~#~char",
      email          = "email~#~char"
    }
  })
  import_account_ent_json = jsonencode({
    authentications = {
      userAuth = {
        authType   = "oauth2",
        url        = "https://<domain name>/api/v18.2/auth",
        httpMethod = "POST",
        httpParams = {
          username = "<Username>",
          password = "<PASSWORD>"
        },
        httpHeaders = {
          contentType = "application/x-www-form-urlencoded"
        },
        httpContentType = "application/x-www-form-urlencoded",
        expiryError     = "ExpiredAuthenticationToken",
        authError = [
          "InvalidAuthenticationToken",
          "AuthenticationFailed",
          "FAILURE",
          "INVALID_SESSION_ID"
        ],
        timeOutError       = "Read timed out",
        errorPath          = "errors.type",
        maxRefreshTryCount = 5,
        tokenResponsePath  = "sessionId",
        tokenType          = "Bearer",
        accessToken        = "<access token>"
      }
    }
  })

  status_threshold_config = jsonencode({
    statusAndThresholdConfig = {
      accountThresholdValue       = 50,
      correlateInactiveAccounts   = true,
      inactivateAccountsNotInFile = false,
      statusColumn                = "customproperty30",
      activeStatus = [
        "ENABLE",
        "PROVISIONED"
      ],
      deleteLinks             = true,
      inactivateEntsNotInFeed = true,
      entThresholdValue = {
        entType = {
          Group = {
            ent = 100
          },
          Role = {
            ent = 100
          }
        }
      }
    }
  })

  create_account_json = jsonencode({
    accountIdPath = "call1.message.user.id",
    dateFormat    = "yyyy-MM-dd'T'HH:mm:ssXXX",
    responseColsToPropsMap = {
      displayname = "call1.message.user.name~#~char"
    },
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users",
        httpMethod = "POST",
        httpParams = "{\"user\": {\"name\": \"$${user.firstname} $${user.lastname}\", \"email\": \"$${user.email}\", \"role\":\"agent\"}}",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      }
    ]
  })

  update_account_json = jsonencode({
    dateFormat = "yyyy-MM-dd'T'HH:mm:ssXXX",
    responseColsToPropsMap = {
      displayName = "call1.message.user.name~#~char"
    },
    call = [
      {
        name       = "Role",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users/$${account.accountID}",
        httpMethod = "PUT",
        httpParams = "{\"user\": {\"name\": \"$${user.firstname} $${user.lastname}\"}}",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      }
    ]
  })

  enable_account_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users",
        httpMethod = "PUT",
        httpParams = "{\"user\":{\"suspended\": \"false\"}}",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      }
    ]
  })

  disable_account_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users",
        httpMethod = "PUT",
        httpParams = "{\"user\":{\"suspended\": \"true\"}}",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      }
    ]
  })

  add_access_json = jsonencode({
    call = [
      {
        name       = "Group",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/group_memberships",
        httpMethod = "POST",
        httpParams = "{\"group_membership\": {\"user_id\": \"$${account.accountID}\", \"group_id\": \"$${entitlementValue.entitlementID}\"}}",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      },
      {
        name       = "Role",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users/$${account.accountID}",
        httpMethod = "PUT",
        httpParams = "{\"user\": {\"custom_role_id\": $${entitlementValue.entitlementID}}}",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      }
    ]
  })

  remove_access_json = jsonencode({
    call = [
      {
        name       = "Group",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users/$${account.accountID}/group_memberships",
        httpMethod = "GET",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      },
      {
        name       = "Group",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/group_memberships/$${for (Map map : response.Group1.message.group_memberships){if (map.group_id.toString().equals(entitlementValue.entitlementID)){return map.id;}}}",
        httpMethod = "DELETE",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            204
          ]
        }
      },
      {
        name       = "Role",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users/$${account.accountID}",
        httpMethod = "PUT",
        httpParams = "{\"user\": {\"custom_role_id\": $${entitlementValue.entitlementID}}}",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      }
    ]
  })

  update_user_json = jsonencode({
    actions = {
      "Update Login" = {
        call = [
          {
            name       = "Update Login",
            callOrder  = 0,
            connection = "userAuth",
            url        = "https://<domain name>/odata/v2/User('$${user.employeeid}')",
            httpMethod = "POST",
            httpParams = "{\"__metadata\":{\"uri\":\"PerEmail(emailType='920',personIdExternal='$${user.employeeid}')\"},\"emailAddress\":\"$${user.email}\",\"isPrimary\":true}",
            httpHeaders = {
              x-http-method = "MERGE",
              Accept        = "application/json",
              Authorization = "$${access_token}"
            },
            httpContentType = "application/json",
            successResponses = {
              "statusCode" : [
                200,
                201
              ]
            }
          }
        ]
      }
    }
  })

  change_pass_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users/$${account.accountID}/password.json",
        httpMethod = "POST",
        httpParams = "{\"password\": \"$${password}\"}",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201,
            204
          ]
        }
      }
    ]
  })

  remove_account_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "@HOSTNAME@/api/v2/users/$${account.accountID}",
        httpMethod = "DELETE",
        httpHeaders = {
          Authorization = "$${access_token}",
          Accept        = "application/json"
        },
        httpContentType = "application/json",
        successResponses = {
          statusCode = [
            200,
            201,
            204
          ]
        }
      }
    ]
  })

  ticket_status_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "userAuth",
        url        = "<https://<domain-name>/api/now/table/sc_req_item?>  sysparm_query=request.number=$${ticketID}&sysparm_limit=1&sysparm_display_value=true",
        httpMethod = "GET",
        httpHeaders = {
          Authorization = "$${access_token}"
        },
        httpContentType  = "application/json",
        ticketStatusPath = "result[0].state",
        ticketStatusValue = [
          "Open",
          "OPEN",
          "open"
        ],
        successResponses = [
          {}
        ]
      }
    ]
  })

  create_ticket_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "userAuth",
        url        = "https://<domain-name>/SaviyntRequest.do?Action=create_ritm",
        httpMethod = "POST",
        httpParams = "{\"bp_id\":\"$${user.username}\",\"name\":\"$${user.lastname},$${user.firstname\",\"$${taskIds}\",\"email\":\"$${user.email}\",\"permissions\": \"$${allEntitlementsValues}\"}",
        httpHeaders = {
          Authorization = "$${access_token}"
        },
        httpContentType = "application/json",
        ticketidPath    = "Request Number",
        unsuccessResponses = {
          message = "Failed"
        }
      }
    ]
  })

  endpoints_filter = jsonencode({
    "<endpoint_name>" : [
      {
        "<entitlementType>" : [
          "entitlementValue1",
          "entitlementValue2"
        ]
      }
    ]
    }
  )

  passwd_policy_json = jsonencode({
    minLength     = 8,
    maxLength     = 20,
    noOfCAPSAlpha = 3,
    noOfDigits    = 2,
    noOfSplChars  = 3
  })

  config_json = jsonencode({
    showLogs = false,
    provisioningLimit = {
      types = {
        NEWACCOUNT     = 100,
        UPDATEACCOUNT  = 100,
        ENABLEACCOUNT  = 100,
        DISABLEACCOUNT = 100,
        REMOVEACCOUNT  = 100,
        ADDACCESS      = 100,
        REMOVEACCESS   = 100,
        UPDATEUSER     = 100,
        CHANGEPASSWORD = 100
      },
      waitTimeMillis = 1000
    }
  })

  add_ffid_access_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "<url>",
        httpMethod = "POST",
        httpParams = "{\"username\": \"vendormanager\", \"password\": \"$${arsTasks.password}\", \"changePasswordAssociatedAccounts\":\"false\", \"endpoint\":\"ABC\", \"validateagainstpolicy\":\"N\", \"updateUserPassword\":\"true\"}",
        httpHeaders = {
          Authorization = "$${access_token}"
        },
        httpContentType = "application/x-www-form-urlencoded",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      }
    ]
  })

  remove_ffid_access_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "<url>",
        httpMethod = "POST",
        httpParams = "{\"username\": \"vendormanager\", \"password\": \"$${arsTasks.password}\", \"changePasswordAssociatedAccounts\":\"false\", \"endpoint\":\"ABC\", \"validateagainstpolicy\":\"N\", \"updateUserPassword\":\"true\"}",
        httpHeaders = {
          Authorization = "$${access_token}"
        },
        httpContentType = "application/x-www-form-urlencoded",
        successResponses = {
          statusCode = [
            200,
            201
          ]
        }
      }
    ]
  })

  modify_user_data_json = jsonencode({
    ADDITIONALTABLES = {
      USERS = "SELECT USERKEY,customproperty5,location,startdate,statuskey,employeeclass,customproperty7,departmentNumber,customproperty10,customproperty14,customproperty16,endDate,termDate,customproperty13,customproperty26,FIRSTNAME,LASTNAME,employeetype FROM USERS"
    },
    COMPUTEDCOLUMNS = [
      "customproperty2",
      "customproperty5",
      "siteid",
      "customproperty8",
      "statuskey",
      "customproperty30",
      "employeetype",
      "departmentNumber",
      "customproperty10",
      "customproperty14",
      "customproperty16",
      "termDate",
      "customproperty13",
      "customproperty45",
      "customproperty34"
    ],
    PREPROCESSQUERIES = [
      "UPDATE NEWUSERDATA SET customproperty2 = 'Transport'",
      "UPDATE NEWUSERDATA SET customproperty34 = 'AT'",
      "UPDATE NEWUSERDATA SET customproperty5 =FROM_UNIXTIME((CAST('0'+SUBSTRING(customproperty5 , 7, 13) AS UNSIGNED))/1000,'%Y-%m-%d')",
      "UPDATE NEWUSERDATA SET siteid = CASE WHEN customproperty7 = 'true' THEN customproperty23 WHEN customproperty7 = 'false' THEN siteid END",
      "UPDATE NEWUSERDATA SET customproperty8 = CASE WHEN customproperty7 = 'true' THEN customproperty25 WHEN customproperty7 = 'false' THEN SUBSTRING(SUBSTRING_INDEX(SUBSTRING_INDEX(location , '(', -1),')',1), 1, 2) END",
      "UPDATE NEWUSERDATA SET statuskey = CASE WHEN (FROM_UNIXTIME((CAST(SUBSTRING(startdate, locate('(' , startdate)+1,(locate('\\)',startdate)-locate('(' , startdate)-1)) AS UNSIGNED))/1000) between sysdate() and DATE_ADD(NOW(),INTERVAL 20 DAY)) THEN 't' ELSE statuskey END",
      "UPDATE NEWUSERDATA SET customproperty30 = CASE WHEN customproperty8 in ('AD','AE','SW','AT','AZ','BE','CH','CZ','DE','DK','DZ','EG','ES','FI','FR','GB','GR','HR','HU','IE','IL','IT','KZ','KA','LV','MA','MY','NG','NL','NO','PL','PT','PF','QA','RO','RU','SA','SE','SN','TN','TR','UZ','ZA','ZW','ZM','YE','EH','UG','TM','TG','TZ','TJ','SY','SZ','SD','SO','SL','SC','ST','RW','OM','NE','NA','MZ','MU','MR','ML','MW','MG','LY','LR','LS','LB','KG','KW','KE','IQ','GW','GN','GH','GE','GA','ET','ER','GQ','DJ','CI','CD','CG','KM','TD','CF','CV','CM','BI','BF','BW','BJ','BH','AM','AO','VG','SJ','GS','SI','SK','RS','SM','SH','AN','MS','ME','MD','MT','MK','LU','LT','LI','XK','JE','IS','VA','GL','GI','GM','FO','FK','EE','CY','KY','IO','BV','BA','BY','AW','AI','AL','BG','UA','PM','RE','NC','MC','YT','MQ','GP','TF','GF','AX','GG','SS') THEN 'EMEA' WHEN customproperty8 in ('AU','CN','HK','IN','ID','JO','JP','MM','PH','SG','KR','TW','TH','VN','WF','VU','TV','TC','TO','TK','TL','LK','SB','WS','PN','PG','PW','PK','MP','NF','NU','NZ','NP','NR','MN','FM','MH','MV','MO','LA','KI','HM','GU','FJ','CK','CC','CX','KH','BN','BT','BD','AQ','AS','AF','KP') THEN 'APAC' WHEN customproperty8 in ('AR','BR','CA','CL','CO','EC','IR','MX','PA','PE','SDQ','US','VE','UY','TT','SR','VC','LC','KN','PY','NI','JM','HN','HT','GY','GT','GD','SV','DM','CU','CR','BO','BM','BZ','BB','BS','AG','DO','VI','UM','PR','BL','BQ','CW','MF','SX') THEN 'AMER' END",
      "UPDATE NEWUSERDATA SET employeetype = CASE WHEN employeeClass in ('Apprentice','Employee','Trainee','VIE France','Hired Staff') THEN 'Internal' WHEN customproperty7 ='true' then 'External' END",
      "UPDATE NEWUSERDATA SET departmentNumber = CASE WHEN customproperty7 = 'true' THEN customproperty24 WHEN customproperty7 = 'false' THEN departmentNumber END",
      "UPDATE NEWUSERDATA SET customproperty14 = CASE WHEN UPPER(customproperty14) = 'abc' THEN '@abcgroup.com' WHEN UPPER(customproperty14) = 'abc1' THEN '@abc1.com' END",
      "UPDATE NEWUSERDATA SET customproperty16 = LOWER(customproperty16)",
      "UPDATE NEWUSERDATA SET termDate = CASE WHEN customproperty7 = 'true' THEN enddate WHEN customproperty7 = 'false' THEN termDate END",
      "UPDATE NEWUSERDATA SET customproperty13 = CASE WHEN customproperty7 = 'true' THEN customproperty13 WHEN customproperty7 = 'false' THEN customproperty26 END",
      "UPDATE NEWUSERDATA SET departmentName = SUBSTR(departmentName,1,CHAR_LENGTH(departmentName) - LOCATE('(', REVERSE(departmentName)))"
    ]
  })

  send_otp_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "<URL>",
        httpMethod = "POST",
        httpHeaders = {
          Accept       = "application/json",
          Content-Type = "application/json"
        },
        httpContentType = "application/json",
        httpParams = {
          senderid = "<SENDERID>",
          message  = "Your Saviynt verification code is $${otp}. It will be valid for the next 300 seconds.",
          phone    = "$${phone}"
        }
      }
    ]
  })

  validate_otp_json = jsonencode({
    call = [
      {
        name       = "call1",
        connection = "acctAuth",
        url        = "<URL>",
        httpHeaders = {
          Accept       = "application/json",
          Content-Type = "application/json"
        },
        httpContentType = "application/json",
        httpParams      = "{\"passCode\": \"$${passCode}\"}",
        unsuccessResponses = {
        statusCode = [403] },
        successResponses = {
          statusCode = [200]
        }
      }
    ]
  })
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `connection_name` (String) Name of the connection. Example: "Active Directory_Doc"

### Optional

- `add_access_json` (String) JSON to add access.
- `add_ffid_access_json` (String) JSON to add FFID access.
- `change_pass_json` (String) JSON to change a user’s password.
- `config_json` (String) General configuration JSON for the REST connector.
- `connection_json` (String) Dynamic JSON configuration for the connection. Must be a valid JSON object string.
- `connection_type` (String) Connection type (e.g., 'AD' for Active Directory). Example: "AD"
- `create_account_json` (String) JSON to create an account.
- `create_ticket_json` (String) JSON to create a ticket.
- `defaultsavroles` (String) Default SAV roles for managing the connection. Example: "ROLE_ORG"
- `description` (String) Description for the connection. Example: "ORG_AD"
- `disable_account_json` (String) JSON configuration to disable an account.
- `email_template` (String) Email template for notifications. Example: "New Account Task Creation"
- `enable_account_json` (String) JSON configuration to enable an account.
- `endpoints_filter` (String) Filter criteria for endpoints.
- `error_code` (String) Error code if the operation fails.
- `import_account_ent_json` (String) JSON for importing accounts and entitlements.
- `import_user_json` (String) JSON for importing users.
- `modify_user_data_json` (String) JSON for modifying user data.
- `msg` (String) Message returned from the operation.
- `pam_config` (String) PAM configuration JSON.
- `passwd_policy_json` (String) JSON defining the password policy.
- `remove_access_json` (String) JSON to remove access.
- `remove_account_json` (String) JSON to remove an account.
- `remove_ffid_access_json` (String) JSON to remove FFID access.
- `save_in_vault` (String) Flag indicating whether the encrypted attribute should be saved in the configured vault. Example: "false"
- `send_otp_json` (String) JSON to send OTP.
- `status_threshold_config` (String) JSON configuration for status thresholds.
- `ticket_status_json` (String) JSON to check ticket status.
- `update_account_json` (String) JSON to update an account.
- `update_user_json` (String) JSON to update a user.
- `validate_otp_json` (String) JSON to validate OTP.
- `vault_configuration` (String) JSON string specifying vault configuration. Example: '{"path":"/secrets/data/kv-dev-intgn1/-AD_Credential","keyMapping":{"PASSWORD":"AD_PASSWORD~#~None"}}'
- `vault_connection` (String) Specifies the type of vault connection being used (e.g., 'Hashicorp'). Example: "Hashicorp"

### Read-Only

- `connection_key` (Number) Unique identifier of the connection returned by the API. Example: 1909
- `id` (String) Resource ID.
