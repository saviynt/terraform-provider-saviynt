---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "saviynt_adsi_connection_resource Resource - saviynt"
subcategory: ""
description: |-
  Create and manage ADSI connector in Saviynt
---

# saviynt_adsi_connection_resource (Resource)

Create and manage ADSI connector in Saviynt

## Example Usage

```terraform
variable "LDAP_PROTOCOL" {
  type        = string
  description = "Protocol type (e.g., LDAP, HTTP, etc.)"
}
variable "IP_ADDRESS" {
  type        = string
  description = "Saviynt host server"
}
variable "PASSWORD" {
  type        = string
  description = "Connection password"
  sensitive   = true
}
variable "BIND_USER" {
  type        = string
  description = "Connection username"
}
variable "VAULT_CONNECTION" {
  type        = string
  description = "Vault connection"
}
variable "VAULT_CONFIG" {
  type        = string
  description = "Vault config"
}
variable "SAVE_IN_VAULT" {
  type        = string
  description = "Save in vault"
}
variable "CONNECTION_URL" {
  type        = string
  description = "Value of CONNECTION_URL"
}
variable "PROVISIONING_URL" {
  type        = string
  description = "Value of PROVISIONING_URL"
}
resource "saviynt_adsi_connection_resource" "example" {
  connection_type     = "ADSI"
  connection_name     = "Terraform_ADSI_Connector"
  email_template      = "Account Password Expiry Email"
  url                 = format("%s://%s", var.LDAP_PROTOCOL, var.IP_ADDRESS)
  password            = var.PASSWORD
  username            = var.BIND_USER
  vault_connection    = var.VAULT_CONNECTION
  vault_configuration = var.VAULT_CONFIG
  save_in_vault       = var.SAVE_IN_VAULT
  connection_url      = var.CONNECTION_URL
  provisioning_url    = var.PROVISIONING_URL
  forestlist          = "domain.org"
  searchfilter        = "DC=domain,DC=org"
  objectfilter        = "(&(objectCategory=person)(objectClass=user))"
  user_attribute      = "[FIRSTNAME::givenname#String,LASTNAME::sn#String,CUSTOMPROPERTY1::samaccountname#String,USERNAME::distinguishedname#String,DISPLAYNAME::cn#String,CUSTOMPROPERTY25::description#String,CUSTOMPROPERTY3::sn#String,COMMENTS::distinguishedname#String,CUSTOMPROPERTY4::homedirectory#String,CUSTOMPROPERTY5::co#String,CUSTOMPROPERTY6::cn#String,CUSTOMPROPERTY7::givenname#String,CUSTOMPROPERTY8::title#String,CUSTOMPROPERTY9::telephonenumber#String,CUSTOMPROPERTY10::c#String,CUSTOMPROPERTY11::uSNCreated#String,ENDDATE::accountExpires#millisec,CUSTOMPROPERTY12::logonCount#String,CUSTOMPROPERTY13::physicaldeliveryofficename#String,UPDATEDATE::whenchanged#date,CUSTOMPROPERTY14::extensionattribute1#String,CUSTOMPROPERTY15::extensionattribute2#String,CUSTOMPROPERTY16::streetaddress#String,CUSTOMPROPERTY17::mailnickname#String,CUSTOMPROPERTY18::department#String,CUSTOMPROPERTY19::countrycode#String,CUSTOMPROPERTY2::samaccountname#String,CUSTOMPROPERTY20::userprincipalname#String,CUSTOMPROPERTY21::manager#String,CUSTOMPROPERTY22::homephone#String,CUSTOMPROPERTY23::mobile#String,CREATEDATE::whencreated#date,customproperty24::useraccountcontrol#String,CUSTOMPROPERTY26::distinguishedname#String,statuskey::useraccountcontrol#String,CUSTOMPROPERTY27::objectguid#String,RECONCILATION_FIELD::CUSTOMPROPERTY27,CUSTOMPROPERTY28::forest#String,CUSTOMPROPERTY29::domain#string]"
  statuskeyjson = jsonencode({
    STATUS_ACTIVE = [
      "512",
      "544",
      "66048"
    ],
    STATUS_INACTIVE = [
      "546",
      "514"
    ]
  })
  account_attribute = "[CUSTOMPROPERTY1::samaccountname#String,CUSTOMPROPERTY2::userprincipalname#String,LASTLOGONDATE::lastLogon#millisec,DISPLAYNAME::cn#String,CUSTOMPROPERTY25::company#String,CUSTOMPROPERTY3::sn#String,COMMENTS::distinguishedname#String,CUSTOMPROPERTY4::homedirectory#String,LASTPASSWORDCHANGE::pwdlastset#millisec,CUSTOMPROPERTY5::co#String,CUSTOMPROPERTY6::cn#String,CUSTOMPROPERTY7::givenname#String,CUSTOMPROPERTY8::title#String,CUSTOMPROPERTY9::telephonenumber#String,CUSTOMPROPERTY10::c#String,DESCRIPTION::description#String,CUSTOMPROPERTY11::usncreated#String,VALIDTHROUGH::accountexpires#millisec,CUSTOMPROPERTY12::logoncount#String,CUSTOMPROPERTY13::physicaldeliveryofficename#String,UPDATEDATE::whenchanged#date,CUSTOMPROPERTY14::extensionattribute1#String,CUSTOMPROPERTY15::extensionattribute2#String,CUSTOMPROPERTY16::streetaddress#String,CUSTOMPROPERTY17::mailnickname#String,CUSTOMPROPERTY18::department#String,CUSTOMPROPERTY19::countrycode#String,NAME::distinguishedname#String,CUSTOMPROPERTY21::manager#String,CUSTOMPROPERTY22::homephone#String,CUSTOMPROPERTY23::mobile#String,ACCOUNTCLASS::objectclass#String,ACCOUNTID::objectguid#String,CUSTOMPROPERTY24::useraccountcontrol#String,CUSTOMPROPERTY28::forest#String,CUSTOMPROPERTY29::domain#string,CUSTOMPROPERTY30::objectclass#String,CUSTOMPROPERTY31::displayname#String,RECONCILATION_FIELD::ACCOUNTID]"

  status_threshold_config = jsonencode({
    statusAndThresholdConfig = {
      statusColumn = "customproperty24",
      activeStatus = [
        "512",
        "544",
        "66048"
      ],
      deleteLinks                   = false,
      accountThresholdValue         = 1000,
      correlateInactiveAccounts     = true,
      inactivateAccountsNotInFile   = false,
      deleteAccEntForActiveAccounts = false
    }
  })
  endpoints_filter = jsonencode(
    {
      "Test Endpoint Filter 1" : [
        {
          memberOf = [
            "CN=ChildSaviyntlabs\\,DomainLocal,OU=Groups,DC=child,DC=saviyntlabs,DC=org",
            "CN=Saviyntlabs-DomainLocal,OU=Groups,DC=saviyntlabs,DC=org"
          ]
        }
      ]
    }
  )
  entitlement_attribute = "memberOf"
  accountnamerule = jsonencode({
    AccountNameRule = {
      Attributes = [
        {
          cn        = "ACCOUNTID",
          baseDN    = "$${baseDN}",
          RuleCheck = "$${user.lastname}, $${user.firstname}###$${user.lastname}, $${user.firstname}1###$${user.lastname}, $${user.firstname}2###$${user.lastname}, $${user.firstname}3###$${user.firstname}4"
        }
      ]
    }
  })
  checkforunique = jsonencode(
    { CheckForUnique = { Attributes = [{ samaccountname = "customproperty1", RuleCheck = "$${user.lastname}###$${user.lastname}1###$${user.lastname}2###$${user.lastname}3###$${user.lastname}4###$${user.lastname}5###$${user.lastname}6###$${user.lastname}7###$${user.lastname}8" }, { userprincipalname = "customproperty2", RuleCheck = "$${user.lastname}@domainame.com###$${user.lastname}1@domainname.com###$${user.lastname}2@domainname.com###$${user.lastname}3@domainname.com###$${user.lastname}4@domainname.com" }, { displayname = "customproperty31", RuleCheck = "$${user.lastname}, $${user.firstname}###$${user.lastname}, $${user.firstname}1###$${user.lastname}, $${user.firstname}2###$${user.lastname}, $${user.firstname}3###$${user.lastname}, $${user.firstname}4" }] } }
  )
  group_search_base_dn = "DC=domain,DC=org"
  group_import_mapping = jsonencode({
    importGroupHierarchy       = "true",
    entitlementTypeName        = "memberOf",
    performGroupAccountLinking = "true",
    groupObjectClass           = "(objectclass=group)",
    entitlementOwnerAttribute  = "managedby",
    tableFieldAttribute        = "accountID",
    mapping                    = "memberHash:memberof_char,customProperty1:samaccounttype_char,customProperty2:instancetype_char,customProperty3:usncreated_char,customProperty4:grouptype_char,customProperty5:dscorepropagationdata_char,customProperty12:dn_char,customProperty13:cn_char,lastscandate:whencreated_date,customProperty15:managedBy_char,entitlement_glossary:description_char,description:description_char,displayname:name_char,customProperty9:name_char,customProperty10:objectcategory_char,customProperty11:samaccounttype_char,entitlement_value:distinguishedname_char,entitlementid:distinguishedname_char,customProperty14:objectclass_char,updatedate:whenchanged_date,customProperty17:distinguishedname_char,RECONCILATION_FIELD:customProperty18,customProperty18:objectguid_char"
  })
  import_nested_membership = "FALSE"
  page_size                = "1000"
  createaccountjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "user",
          "top",
          "Person",
          "OrganizationalPerson"
        ],
        baseDn   = "CN=Users,DC=domain,DC=org",
        password = "*******",
        attributes = {
          sn                 = "$${user.lastname}",
          sAMAccountName     = "$${task.accountName}",
          cn                 = "$${task.accountName}",
          userAccountControl = 512,
          co                 = "",
          department         = "$${user.departmentname}",
          displayName        = "$${user.displayname}",
          employeeID         = "$${user.employeeid}",
          employeeNumber     = "1",
          employeeType       = "$${user.employeeType}",
          givenName          = "$${user.firstname}",
          l                  = "$${user.city}",
          mail               = "$${user.email}",
          proxyAddresses = [
            "SMTP:test@test.org",
            "SIP:Test@test1.org"
          ]
        }
      }
    ]
  })
  updateaccountjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "user"
        ]
        distinguishedName = "$${account.accountID?.replace('\\', '\\\\')?.replace('/', '\\/')}"
        attributes = {
          displayName   = "$${user.displayname}",
          streetAddress = "$${user.street}",
          additionalAttributes = {
            departmentName = "dept",
            companyName    = "domain"
          }
        }
      }
    ]
  })
  addaccessjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "user"
        ]
        distinguishedName = "$${accountID}",
        addGroup          = "$${entitlement_values}"
      }
    ]
    requestConfiguration = {
      grpMemExistenceChk = {
        enable = true
      }
    }
  })
  removeaccessjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "group"
        ]
        distinguishedName = "$${accountID}",
        removeGroup       = "$${entitlement_values}"
      }
    ]
    requestConfiguration = {
      grpMemExistenceChk = {
        enable = true
      }
    }
  })
  enableaccountjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "user"
        ],
        distinguishedName = "$${account.accountID}",
        deleteAllGroups   = false,
        attributes = {
          userAccountControl = 512
        }
      }
    ]
  })
  disableaccountjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "user"
        ],
        distinguishedName = "$${account.accountID}",
        deleteAllGroups   = false,
        attributes = {
          userAccountControl = 514
        }
      }
    ]
  })
  removeaccountjson = jsonencode({
    objects = [
      {
        distinguishedName  = "$${account.accountID}",
        removeAction       = "DELETE",
        deleteChildObjects = false
      }
    ]
  })
  resetandchangepasswrdjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "user"
        ],
        password          = "$${password}",
        distinguishedName = "",
        attributes = {
          pwdLastSet = "$${pwdLastSet}"
        }
      }
    ]
  })
  creategroupjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "group"
        ],
        baseDn = "$${role.customproperty24}",
        attributes = {
          cn          = "$${role.displayname}",
          name        = "$${role.displayname}",
          description = "$${role.description}",
          displayName = "$${role.displayname}",
          groupType   = "$${role?.customproperty21 == 'Security' && role?.customproperty22 == 'Global'?'-2147483646' : role?.customproperty21=='Security'&&role?.customproperty22=='Universal'?'-2147483640' : role?.customproperty21== 'Security'&&role?.customproperty22=='Domain Local' ? '-2147483644':role?.customproperty21=='Distribution'&&role?.customproperty22=='Global' ? '2':role?.customproperty21== 'Distribution'&&role?.customproperty22=='Universal'?'8':role?.customproperty21=='Distribution'&& role?.customproperty22=='Domain Local'?'4':''}"
        }
      }
    ]
  })
  updategroupjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "group"
        ],
        distinguishedName = "$${role.role_name}",
        attributes = {
          description    = "$${role.description}",
          proxyAddresses = "$${role.customproperty20}"
        }
      }
    ]
  })
  removegroupjson = jsonencode({
    objects = [
      {
        distinguishedName  = "$${role.role_name}",
        removeAction       = "DELETE",
        deleteChildObjects = false
      }
    ]
  })
  addaccessentitlementjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "group"
        ],
        distinguishedName = "$${ent1Value.entitlement_value?.replace('\\', '\\\\')?.replace('/', '\\/')}",
        addGroup          = "$${ent2Value.entitlement_value?.replace('\\', '\\\\')?.replace('/', '\\/')}"
      }
    ]
    requestConfiguration = {
      grpMemExistenceChk = {
        enable = true
      }
    }
  })
  removeaccessentitlementjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "group"
        ],
        distinguishedName = "$${ent1Value.entitlement_value?.replace('\\', '\\\\')?.replace('/', '\\/')}",
        removeGroup       = "$${ent2Value.entitlement_value?.replace('\\', '\\\\')?.replace('/', '\\/')}"
      }
    ]
    requestConfiguration = {
      grpMemExistenceChk = {
        enable = true
      }
    }
  })
  createserviceaccountjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "user",
          "top",
          "Person",
          "OrganizationalPerson"
        ],
        baseDn   = "$${baseDN}",
        password = "$${password}",
        attributes = {
          sAMAccountName     = "$${task.accountName}",
          cn                 = "$${task.accountName}",
          displayname        = "testDP",
          userAccountControl = 512
        }
      }
    ]
  })
  updateserviceaccountjson = jsonencode({
    objects = [
      {
        objectClasses = [
          "user",
          "top",
          "Person",
          "OrganizationalPerson"
        ],
        distinguishedName = "$${account.accountID?.replace('\\', '\\\\')?.replace('/', '\\/')}",
        attributes = {
          pwdLastSet  = 0,
          displayName = "testDPUpdated"
        }
      }
    ]
  })
  removeserviceaccountjson = jsonencode({
    objects = [
      {
        distinguishedName  = "$${account.accountID?.replace('\\', '\\\\')?.replace('/', '\\/')}",
        removeAction       = "DELETE",
        deleteChildObjects = false
      }
    ]
  })
  customconfigjson = jsonencode(
    {
      connectionTimeoutConfig = {
        import = {
          timeout   = 300,
          retryWait = 500
        },
        provisioning = {
          timeou    = 300,
          retryWait = 500
        }
      }
    }
  )
  updateuserjson = jsonencode({
    objects = [
      {
        objectClasses     = ["user"]
        distinguishedName = "$${account.COMMENTS?.replace('', '\\')?.replace('/', '/')}"
        moveObjectToOU    = "OU=TestContainer,DC=domain1,DC=com"
        attributes = {
          displayName   = "$${user.displayname}"
          streetaddress = "$${user.street}"
        }
      }
    ]
  })
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `connection_name` (String) Name of the connection. Example: "Active Directory_Doc"
- `connection_url` (String) ADSI remote agent Connection URL
- `forestlist` (String) Forest List (Comma Separated) which we need to manage
- `password` (String) Service account password
- `url` (String) Primary/root domain URL list (comma Separated)
- `username` (String) Service account username

### Optional

- `account_attribute` (String) Map EIC and AD attributes for account import (AD attributes must be in lower case)
- `accountnamerule` (String) Rule to generate account name.
- `addaccessentitlementjson` (String) Configuration to Add nested group hierarchy
- `addaccessjson` (String) Configuration to ADD Access (cross domain/forest group membership) to an account.
- `checkforunique` (String) Evaluate the uniqueness of an attribute
- `connection_type` (String) Connection type (e.g., 'AD' for Active Directory). Example: "AD"
- `createaccountjson` (String) Specify the attributes values which will be used to Create the New Account.
- `creategroupjson` (String) Configuration to Create a Group
- `createserviceaccountjson` (String) Specify the Field Value which will be used to Create the New Service Account.
- `customconfigjson` (String) Custom configuration JSON
- `default_user_role` (String) Default SAV Role to be assigned to all the new users that gets imported via User Import
- `defaultsavroles` (String) Default SAV roles for managing the connection. Example: "ROLE_ORG"
- `description` (String) Description for the connection. Example: "ORG_AD"
- `disableaccountjson` (String) Specify the actions and attributes updates to be performed for disabling an account.
- `email_template` (String) Email template for notifications. Example: "New Account Task Creation"
- `enableaccountjson` (String) Specify the actions and attribute updates to be performed for enabling an account.
- `endpoints_filter` (String) Provide the configuration to create Child Endpoints and import associated accounts and entitlements
- `entitlement_attribute` (String) Account attribute that contains group membership
- `error_code` (String) An error code where '0' signifies success and '1' signifies an unsuccessful operation.
- `group_import_mapping` (String) Map AD group attribute to EIC entitlement attribute for import
- `group_search_base_dn` (String) Group Search Filter to specify the starting point of the directory from where the groups needs to be imported. You can have multiple BaseDNs here separated by ###.
- `import_nested_membership` (String) Specify if you want the connector to import all indirect or nested membership of an account or a group during access import
- `modifyuserdatajson` (String) Specify this parameter to transform the data during user import.
- `msg` (String) A message indicating the outcome of the operation.
- `objectfilter` (String) Object Filter is used to filter the objects that will be returned.This filter will be same for all domains.
- `page_size` (String) Page size defines the number of objects to be returned from each AD operation.
- `pam_config` (String) JSON to specify Bootstrap Config.
- `provisioning_url` (String) ADSI remote agent Provisioning URL
- `removeaccessentitlementjson` (String) Configuration to Remove nested group hierarchy
- `removeaccessjson` (String) Configuration to REMOVE Access (cross domain/forest group membership) to an account.
- `removeaccountjson` (String) Specify the actions to be performed for deleting an account.
- `removegroupjson` (String) Configuration to Delete a Group
- `removeserviceaccountjson` (String) Specify the actions to be performed while deleting a service account.
- `resetandchangepasswrdjson` (String) Configuration to Reset and Change Password.
- `save_in_vault` (String) Flag indicating whether the encrypted attribute should be saved in the configured vault. Example: "false"
- `searchfilter` (String) Account Search Filter to specify the starting point of the directory from where the accounts needs to be imported. You can have multiple BaseDNs here separated by ###.
- `status_threshold_config` (String) Account status and threshold related config
- `statuskeyjson` (String) JSON configuration to specify Users status
- `updateaccountjson` (String) Specify the attributes values which will be used to Update existing Account.
- `updategroupjson` (String) Configuration to Update a Group
- `updateserviceaccountjson` (String) Specify the Field Value which will be used to update the existing Service Account.
- `updateuserjson` (String) Specify the attribute Value which will be used to Update existing User
- `user_attribute` (String) Map EIC and AD attributes for user import (AD attributes must be in lower case)
- `vault_configuration` (String) JSON string specifying vault configuration. Example: '{"path":"/secrets/data/kv-dev-intgn1/-AD_Credential","keyMapping":{"PASSWORD":"AD_PASSWORD~#~None"}}'
- `vault_connection` (String) Specifies the type of vault connection being used (e.g., 'Hashicorp'). Example: "Hashicorp"

### Read-Only

- `connection_key` (Number) Unique identifier of the connection returned by the API. Example: 1909
- `id` (String) Resource ID.
